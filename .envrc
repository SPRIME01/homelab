# .envrc

if [[ -f "./lib/env-loader.sh" ]]; then
  # shellcheck disable=SC1091
  source ./lib/env-loader.sh local
fi

if command -v devbox >/dev/null 2>&1; then
  devbox_nounset_restore=0
  if [[ "$(set -o | grep '^nounset')" == *'on' ]]; then
    devbox_nounset_restore=1
    set +u
  fi
  eval "$(devbox generate direnv --print-envrc)"
  if [[ ${devbox_nounset_restore} -eq 1 ]]; then
    set -u
  fi
fi

if command -v mise >/dev/null 2>&1; then
  eval "$(mise direnv activate)"
  use mise
fi

export NODE_ENV=${NODE_ENV:-development}
export NX_DAEMON=${NX_DAEMON:-false}
export RUST_LOG=${RUST_LOG:-info}
export PYTHONPATH="$PWD"
export UV_CACHE_DIR="$PWD/.cache/uv"
export PNPM_HOME="${PNPM_HOME:-$HOME/.local/share/pnpm}"
export PATH="$PNPM_HOME:$HOME/.volta/bin:$HOME/.cargo/bin:$PATH"

echo "ðŸš€ Loaded homelab environment"
